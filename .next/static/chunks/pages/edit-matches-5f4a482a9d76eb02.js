(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[658],{2484:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/edit-matches",function(){return t(712)}])},712:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return o}});var r=t(5893),s=t(7294);function l(e){let{value:a,onChange:t,placeholder:l="Cari hero...",className:c=""}=e,[o,n]=(0,s.useState)(a||""),[d,i]=(0,s.useState)([]),[m,h]=(0,s.useState)(-1),[u,x]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),p=(0,s.useRef)(null),_=(0,s.useRef)(null);(0,s.useEffect)(()=>{n(a||"")},[a]),(0,s.useEffect)(()=>{let e=setTimeout(async()=>{if(o.length<1){i([]),x(!1);return}b(!0);try{let e=await fetch("/api/heroes_search?q=".concat(encodeURIComponent(o)));if(e.ok){let a=await e.json();i(Array.isArray(a)?a:[]),x(a.length>0)}}catch(e){console.error("Search error:",e),i([]),x(!1)}finally{b(!1)}},300);return()=>clearTimeout(e)},[o]);let y=e=>{n(e),i([]),x(!1),h(-1),t(e)};return(0,s.useEffect)(()=>{let e=e=>{_.current&&p.current&&!_.current.contains(e.target)&&e.target!==p.current&&x(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,r.jsxs)("div",{className:"relative ".concat(c),children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:p,type:"text",value:o,onChange:e=>{n(e.target.value),t(e.target.value)},onKeyDown:e=>{if(u&&0!==d.length)switch(e.key){case"ArrowDown":e.preventDefault(),h(e=>(e+1)%d.length);break;case"ArrowUp":e.preventDefault(),h(e=>(e-1+d.length)%d.length);break;case"Enter":m>=0&&(e.preventDefault(),y(d[m]));break;case"Escape":var a;x(!1),h(-1),null===(a=p.current)||void 0===a||a.blur()}},onFocus:()=>o.length>=1&&d.length>0&&x(!0),placeholder:l,className:"w-full rounded-md border border-gray-300 bg-white focus:border-black focus:ring-black px-3 py-2 pr-10",autoComplete:"off"}),g&&(0,r.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-400"})}),!g&&o&&(0,r.jsx)("button",{type:"button",onClick:()=>{n(""),t(""),i([]),x(!1)},className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u&&d.length>0&&(0,r.jsx)("div",{ref:_,className:"absolute z-10 mt-1 w-full bg-white shadow-lg border border-gray-200 rounded-lg max-h-60 overflow-auto",children:d.map((e,a)=>(0,r.jsx)("div",{className:"cursor-pointer px-4 py-2 text-sm text-gray-700 ".concat(a===m?"bg-gray-100":"hover:bg-gray-50"," ").concat(0===a?"rounded-t-lg":""," ").concat(a===d.length-1?"rounded-b-lg":""),onClick:()=>y(e),onMouseEnter:()=>h(a),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e]})},e+a))}),u&&!g&&o.length>=1&&0===d.length&&(0,r.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg border border-gray-200 rounded-lg p-3",children:(0,r.jsxs)("div",{className:"text-center text-gray-500",children:[(0,r.jsx)("p",{className:"text-sm",children:"Tidak ada hero ditemukan"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Coba kata kunci yang berbeda"})]})})]})}let c={match_date:"",team_a_hero1:"",team_a_hero2:"",team_a_hero3:"",team_a_hero4:"",team_a_hero5:"",team_b_hero1:"",team_b_hero2:"",team_b_hero3:"",team_b_hero4:"",team_b_hero5:"",score_a:0,score_b:0,result:"team_a"};function o(){let[e,a]=(0,s.useState)([]),[t,o]=(0,s.useState)(!1),[n,d]=(0,s.useState)(!1),[i,m]=(0,s.useState)(""),[h,u]=(0,s.useState)(""),[x,g]=(0,s.useState)({...c}),[b,p]=(0,s.useState)(null),[_,y]=(0,s.useState)({...c});(0,s.useEffect)(()=>{let e=!1;return(async()=>{o(!0),m(""),u("");try{let t=await fetch("/api/matches");if(!t.ok)throw Error("Gagal memuat data");let r=await t.json();e||a(Array.isArray(r)?r:[])}catch(e){m(e.message||"Error")}finally{o(!1)}})(),()=>{e=!0}},[]);let f=(e,a)=>{g(t=>({...t,[e]:a}))},j=(e,a)=>{y(t=>({...t,[e]:a}))},v=async e=>{e.preventDefault(),d(!0),m(""),u("");try{let e={...x};if(!(await fetch("/api/matches",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Gagal menambah match");u("Match berhasil ditambahkan"),g({...c});let t=await fetch("/api/matches");if(t.ok){let e=await t.json();a(Array.isArray(e)?e:[])}}catch(e){m(e.message||"Error")}finally{d(!1)}};return(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[(0,r.jsxs)("header",{className:"mb-6 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Matches"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("a",{href:"/",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Home"}),(0,r.jsx)("a",{href:"/items",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Items"})]})]}),(0,r.jsxs)("section",{className:"bg-white rounded-2xl shadow border border-gray-100 p-4 md:p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Tambah Match"}),t&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Memuat data..."}),i&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-2",children:i}),h&&(0,r.jsx)("p",{className:"text-sm text-green-600 mt-2",children:h}),(0,r.jsxs)("form",{onSubmit:v,className:"mt-4 space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal"}),(0,r.jsx)("input",{type:"date",value:x.match_date,onChange:e=>f("match_date",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Score A"}),(0,r.jsx)("input",{type:"number",value:x.score_a,onChange:e=>f("score_a",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Score B"}),(0,r.jsx)("input",{type:"number",value:x.score_b,onChange:e=>f("score_b",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Result"}),(0,r.jsxs)("select",{value:x.result,onChange:e=>f("result",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black",children:[(0,r.jsx)("option",{value:"team_a",children:"Team A"}),(0,r.jsx)("option",{value:"team_b",children:"Team B"}),(0,r.jsx)("option",{value:"draw",children:"Draw"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Team A Picks"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-2",children:[1,2,3,4,5].map(e=>(0,r.jsx)(l,{value:x["team_a_hero".concat(e)],onChange:a=>f("team_a_hero".concat(e),a),placeholder:"Hero ".concat(e)},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Team B Picks"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-2",children:[1,2,3,4,5].map(e=>(0,r.jsx)(l,{value:x["team_b_hero".concat(e)],onChange:a=>f("team_b_hero".concat(e),a),placeholder:"Hero ".concat(e)},e))})]})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:n,className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:n?"Menyimpan...":"Tambah Match"})})]})]}),(0,r.jsxs)("section",{className:"mt-8 bg-white rounded-2xl shadow border border-gray-100 p-4 md:p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Daftar Matches"}),0===e.length?(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Belum ada data."}):(0,r.jsx)("ul",{className:"mt-3 divide-y divide-gray-100",children:e.map(e=>{let t=b===e.id;return(0,r.jsx)("li",{className:"py-4",children:t?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Tanggal"}),(0,r.jsx)("input",{type:"date",value:_.match_date,onChange:e=>j("match_date",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Score A"}),(0,r.jsx)("input",{type:"number",value:_.score_a,onChange:e=>j("score_a",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Score B"}),(0,r.jsx)("input",{type:"number",value:_.score_b,onChange:e=>j("score_b",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Result"}),(0,r.jsxs)("select",{value:_.result,onChange:e=>j("result",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black",children:[(0,r.jsx)("option",{value:"team_a",children:"Team A"}),(0,r.jsx)("option",{value:"team_b",children:"Team B"}),(0,r.jsx)("option",{value:"draw",children:"Draw"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-600",children:"Team A Picks"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-2",children:[1,2,3,4,5].map(e=>(0,r.jsx)(l,{value:_["team_a_hero".concat(e)],onChange:a=>j("team_a_hero".concat(e),a),placeholder:"Hero ".concat(e)},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-medium text-gray-600",children:"Team B Picks"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-2",children:[1,2,3,4,5].map(e=>(0,r.jsx)(l,{value:_["team_b_hero".concat(e)],onChange:a=>j("team_b_hero".concat(e),a),placeholder:"Hero ".concat(e)},e))})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"button",className:"text-xs px-2 py-1 rounded-md border border-gray-200 bg-white text-gray-700 hover:bg-gray-100",onClick:()=>{p(null),y({...c})},children:"Batal"}),(0,r.jsx)("button",{type:"button",className:"text-xs px-2 py-1 rounded-md bg-purple-600 text-white hover:bg-purple-700",onClick:async()=>{try{let t={..._};if(!(await fetch("/api/matches/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Gagal menyimpan");a(a=>a.map(a=>a.id===e.id?{...a,...t}:a)),p(null),y({...c})}catch(e){alert(e.message||"Error")}},children:"Simpan"})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"font-medium text-gray-800",children:e.match_date||"-"}),(0,r.jsxs)("span",{children:["Result: ",(0,r.jsx)("span",{className:"font-medium",children:e.result||"-"})]}),(0,r.jsxs)("span",{children:["Score: ",(0,r.jsxs)("span",{className:"font-medium",children:[e.score_a," - ",e.score_b]})]})]}),(0,r.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Team A"}),(0,r.jsx)("p",{className:"text-gray-800",children:[e.team_a_hero1,e.team_a_hero2,e.team_a_hero3,e.team_a_hero4,e.team_a_hero5].filter(Boolean).join(", ")||"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Team B"}),(0,r.jsx)("p",{className:"text-gray-800",children:[e.team_b_hero1,e.team_b_hero2,e.team_b_hero3,e.team_b_hero4,e.team_b_hero5].filter(Boolean).join(", ")||"-"})]})]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,r.jsx)("button",{type:"button",className:"text-xs px-2 py-1 rounded-md border border-gray-200 bg-white text-gray-700 hover:bg-gray-100",onClick:()=>{var a,t;p(e.id),y({match_date:e.match_date||"",team_a_hero1:e.team_a_hero1||"",team_a_hero2:e.team_a_hero2||"",team_a_hero3:e.team_a_hero3||"",team_a_hero4:e.team_a_hero4||"",team_a_hero5:e.team_a_hero5||"",team_b_hero1:e.team_b_hero1||"",team_b_hero2:e.team_b_hero2||"",team_b_hero3:e.team_b_hero3||"",team_b_hero4:e.team_b_hero4||"",team_b_hero5:e.team_b_hero5||"",score_a:null!==(a=e.score_a)&&void 0!==a?a:0,score_b:null!==(t=e.score_b)&&void 0!==t?t:0,result:e.result||"team_a"})},children:"Edit"}),(0,r.jsx)("button",{type:"button",className:"text-xs px-2 py-1 rounded-md border border-red-200 bg-white text-red-600 hover:bg-red-50",onClick:async()=>{if(confirm("Hapus match ini?"))try{if(!(await fetch("/api/matches/".concat(e.id),{method:"DELETE"})).ok)throw Error("Gagal menghapus");a(a=>a.filter(a=>a.id!==e.id))}catch(e){alert(e.message||"Error")}},children:"Hapus"})]})]})},e.id)})})]})]})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2484)}),_N_E=e.O()}]);