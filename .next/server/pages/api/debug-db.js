"use strict";(()=>{var e={};e.id=9821,e.ids=[9821],e.modules={2418:e=>{e.exports=require("mysql2/promise")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,s)=>{Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,o){return o in s?s[o]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,o)):"function"==typeof s&&"default"===o?s:void 0}}})},4839:(e,s,o)=>{o.r(s),o.d(s,{config:()=>d,default:()=>u,routeModule:()=>p});var t={};o.r(t),o.d(t,{default:()=>i});var n=o(1802),a=o(7153),r=o(6249),c=o(2418),l=o.n(c);async function i(e,s){if("GET"!==e.method)return s.status(405).json({message:"Method not allowed"});try{console.log("Testing database connection...");let e=await l().createConnection({host:process.env.DB_HOST||"localhost",port:Number(process.env.DB_PORT)||3306,user:process.env.DB_USER||"",password:process.env.DB_PASS||"",database:process.env.DB_NAME||""});console.log("Connection successful!");let[o]=await e.execute("SHOW TABLES"),t=o.map(e=>Object.values(e)[0]);console.log("Available tables:",t);let n={},a=["hero","ml_hero","mobile_legend"];for(let s of t){let o=s.toLowerCase();if(a.some(e=>o.includes(e)))try{let[o]=await e.execute(`SELECT COUNT(*) as count FROM \`${s}\``);n[s]=o[0]?.count||0,console.log(`${s} count:`,n[s])}catch(e){console.log(`${s} count error:`,e.message)}}await e.end(),s.status(200).json({success:!0,dbConfig:{host:process.env.DB_HOST,port:process.env.DB_PORT,database:process.env.DB_NAME,user:process.env.DB_USER},availableTables:t,heroTables:n,message:"Database analysis complete"})}catch(e){console.error("Database test error:",e),s.status(500).json({success:!1,error:e.message,dbConfig:{host:process.env.DB_HOST,port:process.env.DB_PORT,database:process.env.DB_NAME,user:process.env.DB_USER},message:"Database connection failed"})}}let u=(0,r.l)(t,"default"),d=(0,r.l)(t,"config"),p=new n.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/debug-db",pathname:"/api/debug-db",bundlePath:"",filename:""},userland:t})},7153:(e,s)=>{var o;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},1802:(e,s,o)=>{e.exports=o(145)}};var s=require("../../webpack-api-runtime.js");s.C(e);var o=s(s.s=4839);module.exports=o})();