(()=>{var e={};e.id=1645,e.ids=[1645,2888,660],e.modules={7302:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>p,default:()=>u,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>g,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>j,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var s=r(7093),l=r(5244),i=r(1323),n=r(5949),o=r(3414),c=r(180),d=e([o]);o=(d.then?(await d)():d)[0];let u=(0,i.l)(c,"default"),m=(0,i.l)(c,"getStaticProps"),x=(0,i.l)(c,"getStaticPaths"),h=(0,i.l)(c,"getServerSideProps"),p=(0,i.l)(c,"config"),g=(0,i.l)(c,"reportWebVitals"),b=(0,i.l)(c,"unstable_getStaticProps"),f=(0,i.l)(c,"unstable_getStaticPaths"),y=(0,i.l)(c,"unstable_getStaticParams"),v=(0,i.l)(c,"unstable_getServerProps"),j=(0,i.l)(c,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/edit-items",pathname:"/edit-items",bundlePath:"",filename:""},components:{App:o.default,Document:n.default},userland:c});a()}catch(e){a(e)}})},8439:(e,t,r)=>{"use strict";r.d(t,{VW:()=>i,_N:()=>d,pm:()=>n});var a=r(997),s=r(6689);r(3783);let l=(0,s.createContext)();function i({children:e}){let[t,r]=(0,s.useState)([]),i=(0,s.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),n=(0,s.useCallback)(e=>{let t=Math.random().toString(36).substr(2,9),a={...e,id:t};return r(e=>[...e,a]),0!==e.duration&&setTimeout(()=>{i(t)},e.duration||5e3),t},[i]);return(0,a.jsxs)(l.Provider,{value:{addToast:n,removeToast:i},children:[e,a.jsx(o,{toasts:t,removeToast:i})]})}function n(){let e=(0,s.useContext)(l);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function o({toasts:e,removeToast:t}){return a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>a.jsx(c,{toast:e,onClose:()=>t(e.id)},e.id))})}function c({toast:e,onClose:t}){let[r,l]=(0,s.useState)(!1);return a.jsx("div",{className:`max-w-sm w-full shadow-lg rounded-lg border p-4 transform transition-all duration-300 ${r?"translate-x-0 opacity-100":"translate-x-full opacity-0"} ${(e=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}})(e.type)}`,children:(0,a.jsxs)("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:(e=>{switch(e){case"success":return a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});default:return a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}})(e.type)}),(0,a.jsxs)("div",{className:"ml-3 w-0 flex-1",children:[e.title&&a.jsx("p",{className:"text-sm font-medium",children:e.title}),e.message&&a.jsx("p",{className:"mt-1 text-sm",children:e.message})]}),a.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:(0,a.jsxs)("button",{onClick:t,className:"inline-flex text-current hover:opacity-75 focus:outline-none focus:opacity-75",children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})}function d(e,t="Error"){return{type:"error",title:t,message:e,duration:7e3}}},3783:(e,t,r)=>{},3414:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>o});var s=r(997);r(6764);var l=r(8439),i=r(5941),n=e([i]);function o({Component:e,pageProps:t}){return s.jsx(i.SWRConfig,{value:{fetcher:async e=>{let t=await fetch(e);if(!t.ok){let e=Error("An error occurred while fetching the data.");throw e.info=await t.json().catch(()=>({})),e.status=t.status,e}return t.json()},revalidateOnFocus:!1,revalidateOnReconnect:!0,dedupingInterval:5e3,errorRetryCount:3,errorRetryInterval:5e3,shouldRetryOnError:!0,loadingTimeout:3e3,focusThrottleInterval:5e3,keepPreviousData:!0},children:s.jsx(l.VW,{children:s.jsx(e,{...t})})})}i=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},5949:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(997),s=r(6859);function l(){return(0,a.jsxs)(s.Html,{lang:"id",children:[(0,a.jsxs)(s.Head,{children:[a.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),a.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),a.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap",rel:"stylesheet"})]}),(0,a.jsxs)("body",{children:[a.jsx(s.Main,{}),a.jsx(s.NextScript,{})]})]})}},180:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(997),s=r(6689),l=r(1163);let i=[{key:"category",label:"Category"},{key:"price",label:"Price"},{key:"description",label:"Description",textarea:!0},{key:"image_url",label:"Image URL",placeholder:"https://example.com/image.png"}];function n(){let e=(0,l.useRouter)(),t="string"==typeof e.query.name?e.query.name:"",[r,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(""),[m,x]=(0,s.useState)(""),[h,p]=(0,s.useState)(()=>Object.fromEntries(i.map(e=>[e.key,""]))),g=(0,s.useMemo)(()=>!!h&&i.some(e=>{let t=h[e.key];return t&&""!==t.toString().trim()}),[h]),[b,f]=(0,s.useState)(""),[y,v]=(0,s.useState)([]),[j,w]=(0,s.useState)(-1),[k,N]=(0,s.useState)(!1),S=(0,s.useRef)(null),P=(0,s.useRef)(null),[C,R]=(0,s.useState)(""),M=t=>{v([]),w(-1),e.push({pathname:"/edit-items",query:{name:t}},void 0,{shallow:!1})},z=(e,t)=>{p(r=>({...r,[e]:t}))},_=async e=>{if(e.preventDefault(),t){c(!0),u(""),x("");try{let e={};if(i.forEach(t=>{let r=h[t.key];void 0!==r&&(e[t.key]=r)}),!(await fetch(`/api/items/${encodeURIComponent(t)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Gagal menyimpan perubahan");x("Perubahan berhasil disimpan"),p(r=>({...r,...e,item_name:t}))}catch(e){u(e.message||"Error")}finally{c(!1)}}};return a.jsx("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,a.jsxs)("header",{className:"mb-6 flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Items"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:"/items",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Items"}),a.jsx("a",{href:"/edit-matches",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Matches"}),a.jsx("a",{href:"/",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Home"})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-2xl shadow border border-gray-100 p-4 md:p-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pilih Item"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{id:"itemInput",ref:P,value:b,onChange:e=>{f(e.target.value),w(-1),N(!0)},onKeyDown:e=>{if(y.length)switch(e.key){case"ArrowDown":e.preventDefault(),w(e=>(e+1)%y.length);break;case"ArrowUp":e.preventDefault(),w(e=>(e-1+y.length)%y.length);break;case"Enter":j>=0&&(e.preventDefault(),M(y[j]));break;case"Escape":v([])}},placeholder:"Ketik nama item...",className:"w-full rounded-md border border-gray-300 bg-white focus:border-black focus:ring-black px-3 py-2",autoComplete:"off"}),y.length>0&&a.jsx("div",{ref:S,className:"absolute z-10 mt-2 w-full bg-white border border-gray-200 rounded-xl shadow-lg max-h-72 overflow-auto",children:y.map((e,t)=>a.jsx("div",{className:`cursor-pointer px-4 py-2 text-sm text-gray-700 ${0===t?"rounded-t-xl":""} ${t===y.length-1?"rounded-b-xl":""} ${t===j?"bg-gray-100":""}`,onMouseDown:t=>{t.preventDefault(),M(e)},children:e},e+t))})]}),t&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Sedang mengedit item: ",a.jsx("span",{className:"font-medium",children:t})]})]}),r&&a.jsx("p",{className:"text-sm text-gray-500",children:"Memuat data..."}),d&&a.jsx("p",{className:"text-sm text-red-600",children:d}),m&&a.jsx("p",{className:"text-sm text-green-600",children:m}),!r&&!d&&t&&!g&&a.jsx("div",{className:"mt-2 rounded-md bg-yellow-50 border border-yellow-200 text-yellow-800 text-sm px-3 py-2",children:'Data item ini belum ada di database. Silakan isi form di bawah lalu klik "Simpan Perubahan".'}),(0,a.jsxs)("form",{onSubmit:_,className:"mt-4 space-y-4",children:[i.map(e=>{let t=h&&void 0!==h[e.key]&&null!==h[e.key]?h[e.key]:"";return(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e.label}),e.textarea?a.jsx("textarea",{value:t,onChange:t=>z(e.key,t.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black",rows:4,placeholder:`Masukkan ${e.label.toLowerCase()}...`}):a.jsx("input",{type:"price"===e.key?"number":"text",value:t,onChange:t=>z(e.key,t.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black",placeholder:e.placeholder||`Masukkan ${e.label.toLowerCase()}...`})]},e.key)}),a.jsx("div",{className:"pt-2",children:a.jsx("button",{type:"submit",disabled:o,className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:o?"Menyimpan...":"Simpan Perubahan"})})]})]})]})})}},6764:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},5941:e=>{"use strict";e.exports=import("swr")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[6859,8342],()=>r(7302));module.exports=a})();