"use strict";(()=>{var e={};e.id=2162,e.ids=[2162],e.modules={6044:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>u,getServerSideProps:()=>p,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>g,routeModule:()=>N,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>f});var a=r(7093),l=r(5244),n=r(1323),i=r(5949),o=r(3414),c=r(8702),d=e([o,c]);[o,c]=d.then?(await d)():d;let u=(0,n.l)(c,"default"),m=(0,n.l)(c,"getStaticProps"),x=(0,n.l)(c,"getStaticPaths"),p=(0,n.l)(c,"getServerSideProps"),h=(0,n.l)(c,"config"),g=(0,n.l)(c,"reportWebVitals"),f=(0,n.l)(c,"unstable_getStaticProps"),b=(0,n.l)(c,"unstable_getStaticPaths"),j=(0,n.l)(c,"unstable_getStaticParams"),v=(0,n.l)(c,"unstable_getServerProps"),y=(0,n.l)(c,"unstable_getServerSideProps"),N=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/compare-items",pathname:"/compare-items",bundlePath:"",filename:""},components:{App:o.default,Document:i.default},userland:c});s()}catch(e){s(e)}})},7134:(e,t,r)=>{r.d(t,{Z:()=>l});var s=r(997),a=r(6689);function l({src:e,alt:t,fallback:r=null,className:l="",containerClassName:n="",onError:i=null}){let[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),p=(0,a.useRef)(null),h=(0,a.useRef)(null);return s.jsx("div",{ref:h,className:n||"w-16 h-16 mx-auto mb-3",children:!e||d?(()=>{if(r)return r;let e=t?t.charAt(0).toUpperCase():"?";return s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-teal-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:e})})})():m?(0,s.jsxs)("div",{className:"relative w-full h-full",children:[!o&&s.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full animate-pulse"}),s.jsx("img",{ref:p,src:e,alt:t,className:`${l} ${o?"opacity-100":"opacity-0"} transition-opacity duration-300`,onLoad:()=>{c(!0)},onError:()=>{u(!0),i&&i()},loading:"lazy"})]}):s.jsx("div",{className:"w-full h-full bg-gray-200 rounded-full"})})}},1258:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{L_:()=>c,nc:()=>i,ql:()=>o});var a=r(5941),l=r(1448),n=e([a,l]);[a,l]=n.then?(await n)():n;let d=async e=>{let t=await fetch(e);if(!t.ok){let e=Error("An error occurred while fetching the data.");throw e.info=await t.json(),e.status=t.status,e}return t.json()};function i(e=!0,t={}){let{category:r="",sortBy:s="name",sortOrder:a="asc",minPrice:n=null,maxPrice:i=null,fetchAll:o=!1}=t,{data:c,error:u,size:m,setSize:x,isValidating:p,mutate:h}=(0,l.default)((t,l)=>{if(!e||o&&t>0||l&&!l.hasMore)return null;let c=new URLSearchParams({limit:"20",offset:(20*t).toString(),sortBy:s,sortOrder:a});return o&&c.append("fetchAll","true"),r&&c.append("category",r),null!==n&&c.append("minPrice",n.toString()),null!==i&&c.append("maxPrice",i.toString()),`/api/items?${c.toString()}`},d,{revalidateFirstPage:!1,revalidateAll:!1,persistSize:!1}),g=c?c.flatMap(e=>e.items||[]):[],f=!!c&&c[c.length-1]?.hasMore,b=!c&&!u,j=b||m>0&&c&&void 0===c[m-1],v=c?.[0]?.items?.length===0,y=p&&c&&c.length===m,N=c?.[0]?.total||0,w=c?.[0]?.filters||{};return{items:g,total:N,hasMore:f,isLoading:b,isLoadingMore:j,isRefreshing:y,isEmpty:v,error:u,loadMore:()=>x(m+1),refresh:h,activeFilters:w,size:m}}function o(e,t=300){let{data:r,error:s,isValidating:l}=(0,a.default)(e&&e.trim()?`/api/items_search?q=${encodeURIComponent(e)}`:null,d,{dedupingInterval:1e3,revalidateOnFocus:!1});return{suggestions:Array.isArray(r)?r:[],isLoading:l,error:s}}function c(){let{data:e,error:t,isValidating:r}=(0,a.default)("/api/items/categories",d,{revalidateOnFocus:!1,dedupingInterval:6e4});return{categories:e?.categories||[],isLoading:!e&&!t,error:t}}s()}catch(e){s(e)}})},8702:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>m});var a=r(997),l=r(6689),n=r(1163),i=r(2255),o=r(8439),c=r(7134),d=r(1258),u=e([d]);function m(){let e=(0,n.useRouter)(),{addToast:t}=(0,o.pm)(),[r,s]=(0,l.useState)([null,null,null]),[u,m]=(0,l.useState)([null,null,null]),[p,h]=(0,l.useState)([!1,!1,!1]),[g,f]=(0,l.useState)(["","",""]),[b,j]=(0,l.useState)(-1),[v,y]=(0,l.useState)(-1),N=[(0,l.useRef)(null),(0,l.useRef)(null),(0,l.useRef)(null)],w=[(0,l.useRef)(null),(0,l.useRef)(null),(0,l.useRef)(null)],S=function(e,t){let[r,s]=(0,l.useState)(e);return r}(b>=0?g[b]:"",0),{suggestions:P,isLoading:k}=(0,d.ql)(S),C=async(e,a)=>{if(!a)return;let l=[...r];l[e]=a,s(l);let n=[...g];n[e]=a,f(n),y(-1),j(-1),h(t=>{let r=[...t];return r[e]=!0,r});try{let t=await fetch(`/api/items/${encodeURIComponent(a)}`);if(!t.ok)throw Error("Item not found");let r=await t.json();m(t=>{let s=[...t];return s[e]=r,s})}catch(r){t((0,o._N)(`Gagal memuat item: ${a}`,"Error")),m(t=>{let r=[...t];return r[e]=null,r})}finally{h(t=>{let r=[...t];return r[e]=!1,r})}_(l)},D=e=>{s(t=>{let r=[...t];return r[e]=null,_(r),r}),m(t=>{let r=[...t];return r[e]=null,r}),f(t=>{let r=[...t];return r[e]="",r}),h(t=>{let r=[...t];return r[e]=!1,r})},_=t=>{let r=new URLSearchParams;t.forEach((e,t)=>{e&&r.append(`item${t+1}`,e)}),e.replace(`/compare-items?${r.toString()}`,void 0,{shallow:!0})},L=(e,t)=>{let r=[...g];r[e]=t,f(r),j(e),y(e)},R=(e,t)=>{"Escape"===t.key&&(y(-1),j(-1))},A=u.filter(Boolean),q=A.length>=2;return a.jsx(i.Z,{children:a.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-white to-blue-50 min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsx("header",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 flex items-center gap-3",children:[a.jsx("span",{className:"text-purple-600",children:"⚖️"})," Compare Items"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Bandingkan 2-3 items untuk melihat perbedaan stats dan harga"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>e.push("/items?showAll=true"),className:"text-sm px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Browse Items"}),a.jsx("button",{onClick:()=>e.push("/"),className:"text-sm px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Home"})]})]})}),(0,a.jsxs)("section",{className:"bg-white rounded-2xl shadow border border-gray-100 p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Pilih Items untuk Dibandingkan"}),A.length>0&&a.jsx("button",{onClick:()=>{s([null,null,null]),m([null,null,null]),f(["","",""]),e.replace("/compare-items",void 0,{shallow:!0})},className:"text-sm text-red-600 hover:text-red-700 font-medium",children:"Clear All"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[0,1,2].map(e=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Item ",e+1," ",0===e&&a.jsx("span",{className:"text-red-500",children:"*"})]}),r[e]?(0,a.jsxs)("div",{className:"border-2 border-purple-200 rounded-lg p-4 bg-purple-50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.Z,{src:u[e]?.image_url,alt:r[e],containerClassName:"w-10 h-10",className:"w-full h-full object-cover rounded-full"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:r[e]}),a.jsx("p",{className:"text-xs text-gray-500",children:u[e]?.category||"Loading..."})]})]}),a.jsx("button",{onClick:()=>D(e),className:"text-red-500 hover:text-red-700",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p[e]&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-purple-600"}),"Loading details..."]})]}):(0,a.jsxs)("div",{className:"relative",children:[a.jsx("input",{ref:N[e],type:"text",value:g[e],onChange:t=>L(e,t.target.value),onKeyDown:t=>R(e,t),onFocus:()=>{j(e),g[e]&&y(e)},placeholder:"Ketik nama item...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),v===e&&b===e&&(P.length>0||k)&&a.jsx("div",{ref:w[e],className:"absolute z-10 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:k?(0,a.jsxs)("div",{className:"flex items-center justify-center py-4 px-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Mencari..."})]}):P.map((t,r)=>a.jsx("div",{className:"cursor-pointer px-4 py-2 text-sm text-gray-700 hover:bg-purple-50",onMouseDown:r=>{r.preventDefault(),C(e,t)},children:t},t+r))})]})]},e))}),!q&&a.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:"Pilih minimal 2 items untuk mulai membandingkan"})]}),q&&a.jsx("section",{className:"bg-white rounded-2xl shadow border border-gray-100 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gradient-to-r from-purple-100 to-blue-100",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-700 w-1/4",children:"Attribute"}),A.map((e,t)=>a.jsx("th",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-700",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[a.jsx(c.Z,{src:e.image_url,alt:e.item_name,containerClassName:"w-16 h-16",className:"w-full h-full object-cover rounded-full"}),a.jsx("span",{className:"font-bold",children:e.item_name}),a.jsx("span",{className:"text-xs text-gray-500 font-normal",children:e.category})]})},t))]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-200",children:[a.jsx(x,{label:"Price",icon:"\uD83D\uDCB0",values:A.map(e=>({value:e.price,display:null!==e.price&&void 0!==e.price?`${e.price.toLocaleString()} gold`:"N/A"})),highlightLowest:!0}),a.jsx(x,{label:"Category",icon:"\uD83D\uDCE6",values:A.map(e=>({value:e.category,display:e.category||"N/A"}))}),(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:"\uD83D\uDCDD"}),a.jsx("span",{children:"Description"})]})}),A.map((e,t)=>a.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 text-center",children:a.jsx("div",{className:"max-w-xs mx-auto text-left",children:e.description||"No description available"})},t))]})]})]})})}),(0,a.jsxs)("footer",{className:"mt-10 text-center text-xs text-gray-400",children:[new Date().getFullYear()," ML Helper"]})]})})})}function x({label:e,icon:t,values:r,highlightLowest:s=!1}){let l=-1;if(s){let e=r.map(e=>"number"==typeof e.value?e.value:1/0),t=Math.min(...e);t!==1/0&&(l=e.indexOf(t))}return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:t}),a.jsx("span",{children:e})]})}),r.map((e,t)=>(0,a.jsxs)("td",{className:`px-6 py-4 text-sm text-center font-medium ${t===l?"text-green-700 bg-green-50":"text-gray-600"}`,children:[e.display,t===l&&s&&a.jsx("span",{className:"ml-2 text-xs",children:"✓ Best"})]},t))]})}d=(u.then?(await u)():u)[0],s()}catch(e){s(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5941:e=>{e.exports=import("swr")},1448:e=>{e.exports=import("swr/infinite")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[6859,8342,1664,5093],()=>r(6044));module.exports=s})();