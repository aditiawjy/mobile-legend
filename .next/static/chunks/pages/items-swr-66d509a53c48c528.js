(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{1617:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/items-swr",function(){return r(1658)}])},2812:function(e,t,r){"use strict";r.d(t,{L_:function(){return E},ql:function(){return _},nc:function(){return k}});var a=r(5068),n=r(7294),s=r(6658),l=r(503),i=r(46),o=r(1688);let c=()=>{},d=c(),u=Object,m=e=>e===d,g=e=>"function"==typeof e,h=new WeakMap,x=e=>u.prototype.toString.call(e),f=(e,t)=>e===`[object ${t}]`,p=0,b=e=>{let t,r;let a=typeof e,n=x(e),s=f(n,"Date"),l=f(n,"RegExp"),i=f(n,"Object");if(u(e)!==e||s||l)t=s?e.toJSON():"symbol"==a?e.toString():"string"==a?JSON.stringify(e):""+e;else{if(t=h.get(e))return t;if(t=++p+"~",h.set(e,t),Array.isArray(e)){for(r=0,t="@";r<e.length;r++)t+=b(e[r])+",";h.set(e,t)}if(i){t="#";let a=u.keys(e).sort();for(;!m(r=a.pop());)m(e[r])||(t+=r+":"+b(e[r])+",");h.set(e,t)}}return t},y=e=>{if(g(e))try{e=e()}catch(t){e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?b(e):"",t]},v=e=>y(e?e(0,null):null)[0],j=Promise.resolve(),w=(0,i.xD)(a.ZP,e=>(t,r,a)=>{let i;let c=(0,n.useRef)(!1),{cache:d,initialSize:u=1,revalidateAll:m=!1,persistSize:g=!1,revalidateFirstPage:h=!0,revalidateOnMount:x=!1,parallel:f=!1}=a,[,,,p]=s.b.get(s.c);try{(i=v(t))&&(i=l.U+i)}catch(e){}let[b,y,w]=(0,s.z)(d,i),N=(0,n.useCallback)(()=>(0,s.e)(b()._l)?u:b()._l,[d,i,u]);(0,o.useSyncExternalStore)((0,n.useCallback)(e=>i?w(i,()=>{e()}):()=>{},[d,i]),N,N);let k=(0,n.useCallback)(()=>{let e=b()._l;return(0,s.e)(e)?u:e},[i,u]),_=(0,n.useRef)(k());(0,s.u)(()=>{if(!c.current){c.current=!0;return}i&&y({_l:g?_.current:k()})},[i,d]);let E=x&&!c.current,C=e(i,async e=>{let n=b()._i,l=b()._r;y({_r:s.U});let i=[],o=k(),[c]=(0,s.z)(d,e),u=c().data,g=[],x=null;for(let e=0;e<o;++e){let[o,c]=(0,s.s)(t(e,f?null:x));if(!o)break;let[b,y]=(0,s.z)(d,o),v=b().data,j=m||n||(0,s.e)(v)||h&&!e&&!(0,s.e)(u)||E||u&&!(0,s.e)(u[e])&&!a.compare(u[e],v);if(r&&("function"==typeof l?l(v,c):j)){let t=async()=>{if(o in p){let e=p[o];delete p[o],v=await e}else v=await r(c);y({data:v,_k:c}),i[e]=v};f?g.push(t):await t()}else i[e]=v;f||(x=v)}return f&&await Promise.all(g.map(e=>e())),y({_i:s.U}),i},a),S=(0,n.useCallback)(function(e,t){let r="boolean"==typeof t?{revalidate:t}:t||{},a=!1!==r.revalidate;return i?(a&&((0,s.e)(e)?y({_i:!0,_r:r.revalidate}):y({_i:!1,_r:r.revalidate})),arguments.length?C.mutate(e,{...r,revalidate:a}):C.mutate()):j},[i,d]),L=(0,n.useCallback)(e=>{let r;if(!i)return j;let[,a]=(0,s.z)(d,i);if((0,s.a)(e)?r=e(k()):"number"==typeof e&&(r=e),"number"!=typeof r)return j;a({_l:r}),_.current=r;let n=[],[l]=(0,s.z)(d,i),o=null;for(let e=0;e<r;++e){let[r]=(0,s.s)(t(e,o)),[a]=(0,s.z)(d,r),i=r?a().data:s.U;if((0,s.e)(i))return S(l().data);n.push(i),o=i}return S(n)},[i,d,S,k]);return{size:k(),setSize:L,mutate:S,get data(){return C.data},get error(){return C.error},get isValidating(){return C.isValidating},get isLoading(){return C.isLoading}}}),N=async e=>{let t=await fetch(e);if(!t.ok){let e=Error("An error occurred while fetching the data.");throw e.info=await t.json(),e.status=t.status,e}return t.json()};function k(){var e,t,r,a,n;let s=!(arguments.length>0)||void 0===arguments[0]||arguments[0],l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{category:i="",sortBy:o="name",sortOrder:c="asc",minPrice:d=null,maxPrice:u=null,fetchAll:m=!1}=l,{data:g,error:h,size:x,setSize:f,isValidating:p,mutate:b}=w((e,t)=>{if(!s||m&&e>0||t&&!t.hasMore)return null;let r=new URLSearchParams({limit:"20",offset:(20*e).toString(),sortBy:o,sortOrder:c});return m&&r.append("fetchAll","true"),i&&r.append("category",i),null!==d&&r.append("minPrice",d.toString()),null!==u&&r.append("maxPrice",u.toString()),"/api/items?".concat(r.toString())},N,{revalidateFirstPage:!1,revalidateAll:!1,persistSize:!1}),y=g?g.flatMap(e=>e.items||[]):[],v=!!g&&(null===(e=g[g.length-1])||void 0===e?void 0:e.hasMore),j=!g&&!h,k=j||x>0&&g&&void 0===g[x-1],_=(null==g?void 0:null===(r=g[0])||void 0===r?void 0:null===(t=r.items)||void 0===t?void 0:t.length)===0,E=p&&g&&g.length===x;return{items:y,total:(null==g?void 0:null===(a=g[0])||void 0===a?void 0:a.total)||0,hasMore:v,isLoading:j,isLoadingMore:k,isRefreshing:E,isEmpty:_,error:h,loadMore:()=>f(x+1),refresh:b,activeFilters:(null==g?void 0:null===(n=g[0])||void 0===n?void 0:n.filters)||{},size:x}}function _(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let{data:t,error:r,isValidating:n}=(0,a.ZP)(e&&e.trim()?"/api/items_search?q=".concat(encodeURIComponent(e)):null,N,{dedupingInterval:1e3,revalidateOnFocus:!1});return{suggestions:Array.isArray(t)?t:[],isLoading:n,error:r}}function E(){let{data:e,error:t,isValidating:r}=(0,a.ZP)("/api/items/categories",N,{revalidateOnFocus:!1,dedupingInterval:6e4});return{categories:(null==e?void 0:e.categories)||[],isLoading:!e&&!t,error:t}}},1658:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(5893),n=r(7294),s=r(1163),l=r(2255),i=r(8439),o=r(7134),c=r(2812);function d(){let e=(0,s.useRouter)(),{addToast:t}=(0,i.pm)(),[r,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(-1),g=(0,n.useRef)(null),h=(0,n.useRef)(null),x=(0,n.useRef)(null),f=function(e,t){let[r,a]=(0,n.useState)(e);return(0,n.useEffect)(()=>{let t=setTimeout(()=>a(e),300);return()=>clearTimeout(t)},[e,300]),r}(r,300),p="true"===e.query.showAll,{items:b,total:y,hasMore:v,isLoading:j,isLoadingMore:w,isEmpty:N,error:k,loadMore:_,refresh:E}=(0,c.nc)(p),{suggestions:C,isLoading:S,error:L}=(0,c.ql)(f);(0,n.useEffect)(()=>{k&&t((0,i._N)("Gagal memuat daftar items. Silakan refresh halaman.","Network Error"))},[k,t]),(0,n.useEffect)(()=>{L&&t((0,i._N)("Gagal mencari items. Silakan coba lagi.","Network Error"))},[L,t]);let M=t=>{t&&(d(t),e.push("/item/".concat(encodeURIComponent(t))))};return(0,n.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&e.target!==h.current&&m(-1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,n.useEffect)(()=>{if(!p||!x.current||!v||w)return;let e=x.current,t=new IntersectionObserver(e=>{e[0].isIntersecting&&_()},{threshold:.1});return t.observe(e),()=>{e&&t.unobserve(e)}},[p,v,w,_]),(0,a.jsx)(l.Z,{children:(0,a.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-white to-green-50 min-h-screen",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,a.jsxs)("header",{className:"mb-8 flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-green-600",children:"ML"})," Items",p&&(0,a.jsx)("span",{className:"text-lg font-normal text-gray-500",children:"- All Items"})]}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:p?"Menampilkan ".concat(b.length).concat(y?" dari ".concat(y):""," items dari database."):"Cari item Mobile Legends dan lihat detailnya secara instan."}),p&&(0,a.jsxs)("button",{onClick:E,className:"mt-2 text-xs inline-flex items-center gap-1 px-2 py-1 rounded-md border border-gray-300 text-gray-600 bg-white hover:bg-gray-50",children:[(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("a",{href:"/?showAll=true",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Heroes"}),(0,a.jsx)("a",{href:"/edit-matches",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Matches"}),(0,a.jsx)("a",{href:"/",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:p?"Dashboard":"Home"}),p&&(0,a.jsx)("button",{onClick:()=>e.push("/items"),className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Kembali ke Search Items"})]})]}),!p&&(0,a.jsxs)("section",{className:"bg-white rounded-2xl shadow border border-gray-100 p-4 md:p-6",children:[(0,a.jsx)("label",{htmlFor:"itemInput",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cari Item"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"itemInput",ref:h,value:r,onChange:e=>{d(e.target.value),m(-1)},onKeyDown:e=>{if(C.length||S)switch(e.key){case"ArrowDown":S||(e.preventDefault(),m(e=>(e+1)%C.length));break;case"ArrowUp":S||(e.preventDefault(),m(e=>(e-1+C.length)%C.length));break;case"Enter":!S&&(u>=0?(e.preventDefault(),M(C[u])):r.trim()&&M(r.trim()));break;case"Escape":d(""),m(-1)}},placeholder:"Ketik nama item...",className:"w-full rounded-none border border-black bg-white focus:border-black focus:ring-black pr-10 px-3 py-2 rounded-xs",autoComplete:"off"}),(C.length>0||S)&&(0,a.jsx)("div",{ref:g,className:"absolute z-10 mt-2 w-full bg-white border border-gray-200 rounded-xl shadow-lg max-h-72 overflow-auto",children:S?(0,a.jsxs)("div",{className:"flex items-center justify-center py-4 px-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-600"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Mencari items..."})]}):C.map((e,t)=>(0,a.jsx)("div",{className:"cursor-pointer px-4 py-2 text-sm text-gray-700 ".concat(0===t?"rounded-t-xl":""," ").concat(t===C.length-1?"rounded-b-xl":""," ").concat(t===u?"bg-gray-100":""),onMouseDown:t=>{t.preventDefault(),M(e)},children:e},e+t))})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Mulai ketik minimal 1 huruf. Gunakan tombol panah untuk navigasi dan Enter untuk pilih."})]}),p&&(0,a.jsx)("section",{className:"bg-white rounded-2xl shadow border border-gray-100 p-4 md:p-6",children:j?(0,a.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Memuat items..."})]}):N?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Tidak ada items ditemukan di database."})}):b.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:b.map((t,r)=>(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors cursor-pointer border border-gray-200",onClick:()=>e.push("/item/".concat(encodeURIComponent(t.item_name))),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.Z,{src:t.image_url,alt:t.item_name,containerClassName:"w-16 h-16 mx-auto mb-3",className:"w-full h-full object-cover rounded-full"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 text-sm mb-1",children:t.item_name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t.category||"Item"})]})},r))}),(0,a.jsxs)("div",{ref:x,className:"mt-8 flex flex-col items-center justify-center py-4",children:[w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),(0,a.jsx)("span",{className:"mt-2 text-sm text-gray-600",children:"Memuat lebih banyak items..."})]}),!v&&b.length>0&&(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["âœ“ Semua ",b.length," items telah dimuat"]})]})]}):null}),(0,a.jsxs)("footer",{className:"mt-10 text-center text-xs text-gray-400",children:[new Date().getFullYear()," ML Helper"]})]})})})}}},function(e){e.O(0,[424,42,888,774,179],function(){return e(e.s=1617)}),_N_E=e.O()}]);