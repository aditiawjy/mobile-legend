"use strict";(()=>{var e={};e.id=6656,e.ids=[6656],e.modules={2418:e=>{e.exports=require("mysql2/promise")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},8902:(e,t,a)=>{a.r(t),a.d(t,{config:()=>c,default:()=>u,routeModule:()=>m});var o={};a.r(o),a.d(o,{default:()=>l});var n=a(1802),r=a(7153),s=a(6249),i=a(1004);async function l(e,t){if("GET"===e.method)try{let e=await (0,i.I)(`SELECT 
        id,
        emblem_name as name, 
        attributes,
        talent_slot1_options as talent1,
        talent_slot2_options as talent2,
        talent_slot3_options as talent3
        FROM emblems 
        ORDER BY emblem_name ASC`);t.status(200).json(e)}catch(e){console.error("Error fetching emblems:",e),t.status(500).json([])}else if("POST"===e.method)try{let{name:a,attributes:o,talent1:n,talent2:r,talent3:s}=e.body;if(!a)return t.status(400).json({message:"Name is required"});let l=await (0,i.I)(`
        INSERT INTO emblems (emblem_name, attributes, talent_slot1_options, talent_slot2_options, talent_slot3_options) 
        VALUES (?, ?, ?, ?, ?)
      `,[a,o||"",n||"",r||"",s||""]);t.status(201).json({id:l.insertId,name:a,attributes:o,talent1:n,talent2:r,talent3:s})}catch(e){console.error("Error creating emblem:",e),t.status(500).json({message:"Failed to create emblem"})}else t.status(405).json({message:"Method not allowed"})}let u=(0,s.l)(o,"default"),c=(0,s.l)(o,"config"),m=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/emblems",pathname:"/api/emblems",bundlePath:"",filename:""},userland:o})},1004:(e,t,a)=>{let o;a.d(t,{I:()=>i,db:()=>s});var n=a(2418),r=a.n(n);async function s(){if(!o){let{DB_HOST:e="localhost",DB_NAME:t="",DB_USER:a="",DB_PASS:n="",DB_PORT:s="3306"}=process.env;try{o=r().createPool({host:e,port:Number(s),user:a,password:n,database:t,connectionLimit:10,charset:"utf8mb4_unicode_ci",acquireTimeout:6e4,timeout:6e4,enableKeepAlive:!0,keepAliveInitialDelay:0})}catch(e){throw console.error("Failed to create database pool:",e),Error("Database connection failed")}}return o}async function i(e,t=[]){try{let a=await s(),[o]=await a.execute(e,t);return o}catch(e){throw console.error("Database query failed:",e),e}}},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=8902);module.exports=a})();