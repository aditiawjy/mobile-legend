"use strict";(()=>{var e={};e.id=6414,e.ids=[6414],e.modules={2418:e=>{e.exports=require("mysql2/promise")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,s)=>{Object.defineProperty(s,"l",{enumerable:!0,get:function(){return function e(s,t){return t in s?s[t]:"then"in s&&"function"==typeof s.then?s.then(s=>e(s,t)):"function"==typeof s&&"default"===t?s:void 0}}})},4792:(e,s,t)=>{t.r(s),t.d(s,{config:()=>d,default:()=>l,routeModule:()=>p});var o={};t.r(o),t.d(o,{default:()=>i});var n=t(1802),r=t(7153),a=t(6249),c=t(2418),u=t.n(c);async function i(e,s){if("GET"!==e.method)return s.status(405).json({message:"Method not allowed"});try{console.log("Testing database connection...");let e=await u().createConnection({host:process.env.DB_HOST||"localhost",port:Number(process.env.DB_PORT)||3306,user:process.env.DB_USER||"",password:process.env.DB_PASS||"",database:process.env.DB_NAME||""});console.log("Connection successful!");let[t]=await e.execute("SHOW TABLES");console.log("Available tables:",t);let[o]=await e.execute("SELECT COUNT(*) as count FROM heroes");console.log("Heroes count:",o[0]?.count||0),await e.end(),s.status(200).json({success:!0,tables:t.map(e=>Object.values(e)[0]),heroesCount:o[0]?.count||0,message:"Database connection successful"})}catch(e){console.error("Database test error:",e),console.error("Error details:",{message:e.message,code:e.code,errno:e.errno,sqlState:e.sqlState}),s.status(500).json({success:!1,error:e.message,code:e.code,details:{DB_HOST:process.env.DB_HOST,DB_PORT:process.env.DB_PORT,DB_NAME:process.env.DB_NAME,DB_USER:process.env.DB_USER},message:"Database connection failed"})}}let l=(0,a.l)(o,"default"),d=(0,a.l)(o,"config"),p=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/test-db",pathname:"/api/test-db",bundlePath:"",filename:""},userland:o})},7153:(e,s)=>{var t;Object.defineProperty(s,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},1802:(e,s,t)=>{e.exports=t(145)}};var s=require("../../webpack-api-runtime.js");s.C(e);var t=s(s.s=4792);module.exports=t})();