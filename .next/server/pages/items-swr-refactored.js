"use strict";(()=>{var e={};e.id=3416,e.ids=[3416],e.modules={4204:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>g,default:()=>c,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>p,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>y,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>f});var s=a(7093),l=a(5244),n=a(1323),i=a(5949),o=a(3414),d=a(6326),u=e([o,d]);[o,d]=u.then?(await u)():u;let c=(0,n.l)(d,"default"),m=(0,n.l)(d,"getStaticProps"),x=(0,n.l)(d,"getStaticPaths"),h=(0,n.l)(d,"getServerSideProps"),g=(0,n.l)(d,"config"),p=(0,n.l)(d,"reportWebVitals"),f=(0,n.l)(d,"unstable_getStaticProps"),b=(0,n.l)(d,"unstable_getStaticPaths"),j=(0,n.l)(d,"unstable_getStaticParams"),v=(0,n.l)(d,"unstable_getServerProps"),y=(0,n.l)(d,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/items-swr-refactored",pathname:"/items-swr-refactored",bundlePath:"",filename:""},components:{App:o.default,Document:i.default},userland:d});r()}catch(e){r(e)}})},7134:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(997),s=a(6689);function l({src:e,alt:t,fallback:a=null,className:l="",containerClassName:n="",onError:i=null}){let[o,d]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),h=(0,s.useRef)(null),g=(0,s.useRef)(null);return r.jsx("div",{ref:g,className:n||"w-16 h-16 mx-auto mb-3",children:!e||u?(()=>{if(a)return a;let e=t?t.charAt(0).toUpperCase():"?";return r.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-teal-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-lg",children:e})})})():m?(0,r.jsxs)("div",{className:"relative w-full h-full",children:[!o&&r.jsx("div",{className:"absolute inset-0 bg-gray-200 rounded-full animate-pulse"}),r.jsx("img",{ref:h,src:e,alt:t,className:`${l} ${o?"opacity-100":"opacity-0"} transition-opacity duration-300`,onLoad:()=>{d(!0)},onError:()=>{c(!0),i&&i()},loading:"lazy"})]}):r.jsx("div",{className:"w-full h-full bg-gray-200 rounded-full"})})}},6326:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>x});var s=a(997),l=a(6689),n=a(5941),i=a(1163),o=a(968),d=a.n(o);a(1664);var u=a(2255),c=a(7134),m=e([n]);n=(m.then?(await m)():m)[0];let h=async e=>{let t=await fetch(e);if(!t.ok){let e=Error("An error occurred while fetching the data.");throw e.info=await t.json(),e.status=t.status,e}return t.json()},g="/api",p=`${g}/search`,f=`${g}/items`;function x(){let e=(0,i.useRouter)(),[t,a]=(0,l.useState)(""),[r,o]=(0,l.useState)(!1),[m,x]=(0,l.useState)(-1),[g,b]=(0,l.useState)(!1),[j,v]=(0,l.useState)(""),y=(0,l.useRef)(null),w=(0,l.useRef)(null),{data:N,error:S,isLoading:k}=(0,n.default)(j.length>0?`${p}?q=${encodeURIComponent(j)}`:null,h,{revalidateOnFocus:!1,dedupingInterval:1e3}),P=(0,l.useMemo)(()=>N&&N.suggestions||[],[N]),{data:M,error:$,size:C,setSize:_,isLoading:R,isValidating:q}=(0,n.useSWRInfinite)(e=>`${f}?page=${e+1}&limit=12`,h,{revalidateOnFocus:!1,revalidateFirstPage:!1}),D=(0,l.useMemo)(()=>M?M.flatMap(e=>e.items||[]):[],[M]),I=(0,l.useMemo)(()=>{if(!M||0===M.length)return!1;let e=M[M.length-1];return!1!==e.hasMore&&e.items?.length>0},[M]),A=0===D.length&&!R,F=a=>{a.preventDefault(),t.trim()&&e.push(`/item/${encodeURIComponent(t.trim())}`)},E=t=>{a(t),b(!1),e.push(`/item/${encodeURIComponent(t)}`)};return(0,s.jsxs)(u.Z,{children:[(0,s.jsxs)(d(),{children:[s.jsx("title",{children:"Items - ML Helper"}),s.jsx("meta",{name:"description",content:"Cari dan jelajahi items di database ML Helper"}),s.jsx("link",{rel:"icon",href:"/favicon.ico"})]}),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:"Items Database"}),s.jsx("p",{className:"text-gray-600",children:"Cari atau jelajahi semua items yang tersedia"})]}),s.jsx("div",{className:"flex justify-center mb-6",children:(0,s.jsxs)("div",{className:"bg-white rounded-full shadow-md p-1 flex",children:[s.jsx("button",{onClick:()=>o(!1),className:`px-6 py-2 rounded-full text-sm font-medium transition-all ${r?"text-gray-600 hover:text-gray-800":"bg-blue-600 text-white"}`,children:"Pencarian"}),s.jsx("button",{onClick:()=>o(!0),className:`px-6 py-2 rounded-full text-sm font-medium transition-all ${r?"bg-blue-600 text-white":"text-gray-600 hover:text-gray-800"}`,children:"Semua Items"})]})}),!r&&(0,s.jsxs)("section",{className:"bg-white rounded-2xl shadow border border-gray-100 p-4 md:p-6 mb-6",children:[s.jsx("form",{onSubmit:F,children:(0,s.jsxs)("div",{className:"relative",ref:y,children:[s.jsx("input",{type:"text",value:t,onChange:e=>{let t=e.target.value;a(t),x(-1),b(t.length>0)},onKeyDown:e=>{if(g&&0!==P.length)switch(e.key){case"ArrowDown":e.preventDefault(),x(e=>(e+1)%P.length);break;case"ArrowUp":e.preventDefault(),x(e=>(e-1+P.length)%P.length);break;case"Enter":e.preventDefault(),m>=0&&m<P.length?E(P[m]):F(e);break;case"Escape":b(!1),x(-1)}},onFocus:()=>b(t.length>0),placeholder:"Ketik nama item...",className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoComplete:"off"}),s.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),g&&t.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg max-h-60 overflow-y-auto",children:k?(0,s.jsxs)("div",{className:"flex items-center justify-center py-3",children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-green-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Mencari items..."})]}):P.length>0?P.map((e,t)=>s.jsx("div",{className:`cursor-pointer px-4 py-2 text-sm text-gray-700 ${0===t?"rounded-t-xl":""} ${t===P.length-1?"rounded-b-xl":""} ${t===m?"bg-gray-100":""}`,onMouseDown:t=>{t.preventDefault(),E(e)},children:e},e+t)):(0,s.jsxs)("div",{className:"px-4 py-3 text-sm text-gray-500",children:['Tidak ada hasil untuk "',t,'"']})})]})}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Mulai ketik minimal 1 huruf. Gunakan tombol panah untuk navigasi dan Enter untuk pilih."})]}),r&&s.jsx("section",{className:"bg-white rounded-2xl shadow border border-gray-100 p-4 md:p-6",children:R?(0,s.jsxs)("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Memuat items..."})]}):A?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600",children:"Tidak ada items ditemukan di database."})}):D.length>0?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:D.map((t,a)=>s.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors cursor-pointer border border-gray-200",onClick:()=>e.push(`/item/${encodeURIComponent(t.item_name)}`),children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx(c.Z,{src:t.image_url,alt:t.item_name,containerClassName:"w-16 h-16 mx-auto mb-3",className:"w-full h-full object-cover rounded-full"}),s.jsx("h3",{className:"font-semibold text-gray-900 text-sm mb-1",children:t.item_name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.category||"Item"})]})},a))}),(0,s.jsxs)("div",{ref:w,className:"mt-8 flex flex-col items-center justify-center py-4",children:[q&&C>0&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}),s.jsx("span",{className:"mt-2 text-sm text-gray-600",children:"Memuat lebih banyak items..."})]}),!I&&D.length>0&&(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["âœ“ Semua ",D.length," items telah dimuat"]})]})]}):null}),(0,s.jsxs)("footer",{className:"mt-10 text-center text-xs text-gray-400",children:[new Date().getFullYear()," ML Helper"]})]})})]})}r()}catch(e){r(e)}})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5941:e=>{e.exports=import("swr")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[6859,8342,1664,5093],()=>a(4204));module.exports=r})();