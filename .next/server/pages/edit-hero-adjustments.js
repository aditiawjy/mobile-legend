(()=>{var e={};e.id=2589,e.ids=[2589,2888,660],e.modules={3270:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>u,getServerSideProps:()=>p,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>g,routeModule:()=>w,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var a=r(7093),l=r(5244),n=r(1323),i=r(5949),d=r(3414),o=r(6742),c=e([d]);d=(c.then?(await c)():c)[0];let u=(0,n.l)(o,"default"),m=(0,n.l)(o,"getStaticProps"),x=(0,n.l)(o,"getStaticPaths"),p=(0,n.l)(o,"getServerSideProps"),h=(0,n.l)(o,"config"),g=(0,n.l)(o,"reportWebVitals"),b=(0,n.l)(o,"unstable_getStaticProps"),f=(0,n.l)(o,"unstable_getStaticPaths"),j=(0,n.l)(o,"unstable_getStaticParams"),y=(0,n.l)(o,"unstable_getServerProps"),v=(0,n.l)(o,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/edit-hero-adjustments",pathname:"/edit-hero-adjustments",bundlePath:"",filename:""},components:{App:d.default,Document:i.default},userland:o});s()}catch(e){s(e)}})},8439:(e,t,r)=>{"use strict";r.d(t,{VW:()=>n,_N:()=>c,pm:()=>i});var s=r(997),a=r(6689);r(3783);let l=(0,a.createContext)();function n({children:e}){let[t,r]=(0,a.useState)([]),n=(0,a.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),i=(0,a.useCallback)(e=>{let t=Math.random().toString(36).substr(2,9),s={...e,id:t};return r(e=>[...e,s]),0!==e.duration&&setTimeout(()=>{n(t)},e.duration||5e3),t},[n]);return(0,s.jsxs)(l.Provider,{value:{addToast:i,removeToast:n},children:[e,s.jsx(d,{toasts:t,removeToast:n})]})}function i(){let e=(0,a.useContext)(l);if(!e)throw Error("useToast must be used within a ToastProvider");return e}function d({toasts:e,removeToast:t}){return s.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(e=>s.jsx(o,{toast:e,onClose:()=>t(e.id)},e.id))})}function o({toast:e,onClose:t}){let[r,l]=(0,a.useState)(!1);return s.jsx("div",{className:`max-w-sm w-full shadow-lg rounded-lg border p-4 transform transition-all duration-300 ${r?"translate-x-0 opacity-100":"translate-x-full opacity-0"} ${(e=>{switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}})(e.type)}`,children:(0,s.jsxs)("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:(e=>{switch(e){case"success":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"error":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});default:return s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}})(e.type)}),(0,s.jsxs)("div",{className:"ml-3 w-0 flex-1",children:[e.title&&s.jsx("p",{className:"text-sm font-medium",children:e.title}),e.message&&s.jsx("p",{className:"mt-1 text-sm",children:e.message})]}),s.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:(0,s.jsxs)("button",{onClick:t,className:"inline-flex text-current hover:opacity-75 focus:outline-none focus:opacity-75",children:[s.jsx("span",{className:"sr-only",children:"Close"}),s.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})}function c(e,t="Error"){return{type:"error",title:t,message:e,duration:7e3}}},3783:(e,t,r)=>{},3414:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>d});var a=r(997);r(6764);var l=r(8439),n=r(5941),i=e([n]);function d({Component:e,pageProps:t}){return a.jsx(n.SWRConfig,{value:{fetcher:async e=>{let t=await fetch(e);if(!t.ok){let e=Error("An error occurred while fetching the data.");throw e.info=await t.json().catch(()=>({})),e.status=t.status,e}return t.json()},revalidateOnFocus:!1,revalidateOnReconnect:!0,dedupingInterval:5e3,errorRetryCount:3,errorRetryInterval:5e3,shouldRetryOnError:!0,loadingTimeout:3e3,focusThrottleInterval:5e3,keepPreviousData:!0},children:a.jsx(l.VW,{children:a.jsx(e,{...t})})})}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},5949:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(997),a=r(6859);function l(){return(0,s.jsxs)(a.Html,{lang:"id",children:[(0,s.jsxs)(a.Head,{children:[s.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),s.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),s.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap",rel:"stylesheet"})]}),(0,s.jsxs)("body",{children:[s.jsx(a.Main,{}),s.jsx(a.NextScript,{})]})]})}},6742:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(997),a=r(6689),l=r(1163);function n(){let e=(0,l.useRouter)(),t="string"==typeof e.query.name?e.query.name:"",[r,n]=(0,a.useState)(!1),[i,d]=(0,a.useState)(!1),[o,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[x,p]=(0,a.useState)([]),[h,g]=(0,a.useState)(null),[b,f]=(0,a.useState)({adj_date:"",season:"",description:""}),[j,y]=(0,a.useState)({adj_date:"",season:"",description:""}),[v,w]=(0,a.useState)(""),[N,k]=(0,a.useState)([]),[S,C]=(0,a.useState)(-1),[_,P]=(0,a.useState)(!1),R=(0,a.useRef)(null),E=(0,a.useRef)(null),[M,T]=(0,a.useState)(""),z=t=>{k([]),C(-1),e.push({pathname:"/edit-hero-adjustments",query:{name:t}},void 0,{shallow:!1})},D=(e,t)=>{y(r=>({...r,[e]:t}))},q=(e,t)=>{f(r=>({...r,[e]:t}))},A=async e=>{if(e.preventDefault(),t){d(!0),c(""),m("");try{let e={adj_date:j.adj_date,season:j.season,description:j.description};if(!e.description)throw Error("Deskripsi wajib diisi");if(!e.season)throw Error("Season wajib diisi");if(!(await fetch(`/api/heroes/${encodeURIComponent(t)}/adjustments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Gagal menyimpan perubahan");m("Adjustment berhasil ditambahkan"),y({adj_date:"",season:"",description:""});let r=await fetch(`/api/heroes/${encodeURIComponent(t)}/adjustments`);if(r.ok){let e=await r.json();p(Array.isArray(e)?e:[])}}catch(e){c(e.message||"Error")}finally{d(!1)}}};return s.jsx("main",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,s.jsxs)("header",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Edit Hero Adjustments"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("a",{href:"/",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Heroes"}),s.jsx("a",{href:"/items",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Items"}),s.jsx("a",{href:"/edit-matches",className:"text-sm inline-flex items-center gap-1 px-3 py-1.5 rounded-md border border-gray-200 text-gray-700 bg-white hover:bg-gray-100",children:"Matches"})]})]}),(0,s.jsxs)("section",{className:"bg-white rounded-2xl shadow border border-gray-100 p-4 md:p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pilih Hero"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("input",{id:"heroAdjInput",ref:E,value:v,onChange:e=>{w(e.target.value),C(-1),P(!0)},onKeyDown:e=>{if(N.length)switch(e.key){case"ArrowDown":e.preventDefault(),C(e=>(e+1)%N.length);break;case"ArrowUp":e.preventDefault(),C(e=>(e-1+N.length)%N.length);break;case"Enter":S>=0&&(e.preventDefault(),z(N[S]));break;case"Escape":k([])}},placeholder:"Ketik nama hero...",className:"w-full rounded-md border border-gray-300 bg-white focus:border-black focus:ring-black px-3 py-2",autoComplete:"off"}),N.length>0&&s.jsx("div",{ref:R,className:"absolute z-10 mt-2 w-full bg-white border border-gray-200 rounded-xl shadow-lg max-h-72 overflow-auto",children:N.map((e,t)=>s.jsx("div",{className:`cursor-pointer px-4 py-2 text-sm text-gray-700 ${0===t?"rounded-t-xl":""} ${t===N.length-1?"rounded-b-xl":""} ${t===S?"bg-gray-100":""}`,onMouseDown:t=>{t.preventDefault(),z(e)},children:e},e+t))})]}),t&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Sedang mengedit hero: ",s.jsx("span",{className:"font-medium",children:t})]})]}),r&&s.jsx("p",{className:"text-sm text-gray-500",children:"Memuat data..."}),o&&s.jsx("p",{className:"text-sm text-red-600",children:o}),u&&s.jsx("p",{className:"text-sm text-green-600",children:u}),(0,s.jsxs)("form",{onSubmit:A,className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal"}),s.jsx("input",{type:"date",value:j.adj_date,onChange:e=>D("adj_date",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Season"}),s.jsx("input",{type:"text",value:j.season,onChange:e=>D("season",e.target.value),placeholder:"e.g., Season 30",className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{className:"md:col-span-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deskripsi"}),s.jsx("textarea",{value:j.description,onChange:e=>D("description",e.target.value),rows:3,className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black",placeholder:"Tuliskan perubahan/penyesuaian skill di patch ..."})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:i||!t,className:"inline-flex items-center gap-2 px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50",children:i?"Menyimpan...":"Tambah Adjustment"})})]}),(0,s.jsxs)("div",{className:"mt-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Riwayat Adjustments"}),0===x.length?s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Belum ada data."}):s.jsx("ul",{className:"mt-3 divide-y divide-gray-100",children:x.map(e=>{let r=h===e.id;return s.jsx("li",{className:"py-3",children:(0,s.jsxs)("div",{children:[s.jsx("div",{className:"flex-1 min-w-0",children:r?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Tanggal"}),s.jsx("input",{type:"date",value:b.adj_date||"",onChange:e=>q("adj_date",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Season"}),s.jsx("input",{type:"text",value:b.season||"",onChange:e=>q("season",e.target.value),placeholder:"e.g., Season 30",className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Deskripsi"}),s.jsx("textarea",{rows:3,value:b.description||"",onChange:e=>q("description",e.target.value),className:"mt-1 w-full rounded-md border border-gray-300 px-3 py-2 focus:border-black focus:ring-black"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.adj_date||"-"," â€¢ ",e.season||"-"]}),s.jsx("p",{className:"text-sm text-gray-700 mt-1 whitespace-pre-wrap",children:e.description})]})}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded-md border border-gray-200 bg-white text-gray-700 hover:bg-gray-100",onClick:()=>{g(null),f({adj_date:"",season:"",description:""})},children:"Batal"}),s.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded-md bg-purple-600 text-white hover:bg-purple-700",onClick:async()=>{try{let r={adj_date:b.adj_date,season:b.season,description:b.description};if(!(await fetch(`/api/heroes/${encodeURIComponent(t)}/adjustments/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Gagal menyimpan");p(t=>t.map(t=>t.id===e.id?{...t,...r}:t)),g(null),f({adj_date:"",season:"",description:""})}catch(e){alert(e.message||"Error")}},children:"Simpan"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded-md border border-gray-200 bg-white text-gray-700 hover:bg-gray-100",onClick:()=>{g(e.id),f({adj_date:e.adj_date||"",season:e.season||"",description:e.description||""})},children:"Edit"}),s.jsx("button",{type:"button",className:"text-xs px-2 py-1 rounded-md border border-red-200 bg-white text-red-600 hover:bg-red-50",onClick:async()=>{if(confirm("Hapus adjustment ini?"))try{if(!(await fetch(`/api/heroes/${encodeURIComponent(hero)}/adjustments/${e.id}`,{method:"DELETE"})).ok)throw Error("Gagal menghapus");p(t=>t.filter(t=>t.id!==e.id))}catch(e){alert(e.message||"Error")}},children:"Hapus"})]})})]})},e.id)})})]})]})]})})}},6764:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},5941:e=>{"use strict";e.exports=import("swr")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[6859,8342],()=>r(3270));module.exports=s})();